<#if list_suggest_submit?has_content>
  <#list list_suggest_submit as suggest_submit_display>
  <div class="row" id="suggest${suggest_submit_display.suggest_submit.idSuggestSubmit}">
    <div class="col-sm-12 ftco-animate fadeInUp ftco-animated">
      <div class="bg-white card mb-4 order-list shadow-sm">
        <div class="p-3">
          <div class="row">
            <div class="col-sm-4">
            <#if suggest_submit_display.lutece_user?exists> 
              <a href="jsp/site/Portal.jsp?page=suggest&amp;id_suggest=${id_suggest}&lutece_user_name_filter=${suggest_submit_display.lutece_user!}" title="#i18n{suggest.suggestListSubmit.labelFilterByUserName}">
                <#if suggest_submit_display.avatar?has_content>
                  <img class="mr-4 avatar avatar-suggest rounded-circle" width="64px" src="${suggest_submit_display.avatar}" alt="avatar provided by gravatar.com">
                <#else>
                  <img class="mr-4 avatar avatar-suggest rounded-circle" width="64px" src="images/user.svg" alt=""> 
                </#if>
              </a>
            <#else>
              <img class="mr-4 avatar avatar-suggest rounded-circle" width="64px" src="images/user.svg" alt="">
            </#if>
            <div class="text d-flex py-4">
              <div class="mb-3">
                <p class="meta">
                  <a href="#"><#if suggest_submit_display.lutece_user?exists><#if suggest_submit_display.lutece_user?exists>${suggest_submit_display.lutece_user!""}<#else>${suggest_submit_display.lutece_user.getUserInfo("user.name.given")} ${suggest_submit_display.lutece_user.getUserInfo("user.name.family")}</#if></#if></a>
                </p>
                <p class="meta">
                  <span class="icon-calendar"></span> ${suggest_submit_display.suggest_submit.dateResponse}
                </p>
                <p class="meta">
                  <#if authorized_comment && !suggest_submit_display.suggest_submit.disableComment>
                    <#if suggest_submit_display.suggest_submit.numberCommentEnable &gt; 0 >
                      <a class="meta-chat" href="jsp/site/Portal.jsp?page=suggest&amp;id_suggest=${id_suggest}&amp;id_suggest_submit=${suggest_submit_display.suggest_submit.idSuggestSubmit}&amp;action=view_suggest_submit#suggest${suggest_submit_display.suggest_submit.idSuggestSubmit}">
                        <span class="icon-chat"></span> ${suggest_submit_display.suggest_submit.numberCommentEnable} <#if suggest_submit_display.suggest_submit.numberCommentEnable &gt; 1 >#i18n{suggest.suggestListSubmit.labelComments}<#else>#i18n{suggest.suggestListSubmit.labelComment}</#if>
                      </a>
                    </#if>
                  </#if>
                </p>
                <#if authorized_vote && !suggest_submit_display.suggest_submit.disableVote && suggest_submit_display.suggest_submit.numberScore?exists>
                  <p class="meta">
                    <span class="icon-trophy"></span> #i18n{suggest.manageSuggestSubmit.rowNumberScore} ${suggest_submit_display.suggest_submit.numberScore}
                  </p> 
                </#if>
                </div>
              </div>
            </div>
            <div class="col-sm-8">
              <div class="desc pl-3">
                <a class="heading text-dark" href="jsp/site/Portal.jsp?page=suggest&amp;id_suggest=${id_suggest}&amp;id_suggest_submit=${suggest_submit_display.suggest_submit.idSuggestSubmit}&amp;action=view_suggest_submit#suggest${suggest_submit_display.suggest_submit.idSuggestSubmit}">
                <#if suggest_submit_display.suggest_submit.suggestSubmitValueShowInTheList?exists>
                  <#if suggest_submit_display.suggest_submit.suggestSubmitValueShowInTheList?length &gt; 500>
                    ${suggest_submit_display.suggest_submit.suggestSubmitValueShowInTheList}
                  <#else>
                    ${suggest_submit_display.suggest_submit.suggestSubmitValueShowInTheList}
                  </#if>
                </#if>
                </a>
                <p class="text-gray mb-3">
                  <#if suggest_submit_display.suggest_submit.suggestSubmitType?exists>
                    <span class="badge" style="background-color:${suggest_submit_display.suggest_submit.suggestSubmitType.color!};">
                      <a href="jsp/site/Portal.jsp?page=suggest&id_suggest=${id_suggest}&id_filter_type=${suggest_submit_display.suggest_submit.suggestSubmitType.idType}&action=view_suggest_submit_list" style="color:#fff;">
                        <#if suggest_submit_display.suggest_submit.suggestSubmitType.idImageResource?has_content>
                          <img class="rounded-circle img-thumbnail img-badge" src="image?resource_type=image_suggest&id=${suggest_submit_display.suggest_submit.suggestSubmitType.idImageResource}" title="${suggest_submit_display.suggest_submit.suggestSubmitType.name} " alt="${suggest_submit_display.suggest_submit.suggestSubmitType.name} ">
                        </#if>
                        ${suggest_submit_display.suggest_submit.suggestSubmitType.name}
                      </a>
                    </span>
                  </#if>
                </p>
              </div>
              <#if authorized_comment && !suggest_submit_display.suggest_submit.disableComment && display_comment_in_list>
                <#assign nbComments = 1>
		            
                <#if suggest_submit_display.suggest_submit.numberCommentEnable &gt; 0 >
                <hr>
                <div class="suggest-list-comments">
                    <#if suggest_submit_display.suggest_submit.numberCommentEnable &gt; 1 >
                      <#assign lblComment>#i18n{suggest.suggestListSubmit.labelPreviewForPlural} ${suggest_submit_display.suggest_submit.numberCommentEnable} #i18n{suggest.suggestListSubmit.labelComments}</#assign>
                    <#else>
                      <#assign lblComment>#i18n{suggest.suggestListSubmit.labelPreviewForSingle} #i18n{suggest.suggestListSubmit.labelComment}</#assign>
                    </#if>
                    <h5>${i18n( "suggest.suggestListSubmit.labelPreviewComments", lblComment)}</h5>
                    <ul class="list-unstyled">
                      <#list suggest_submit_display.suggest_submit.comments as comment>
                      <#if nbComments <= number_comments>
                      <li>
                        <i class="far fa-comment"></i> <#if comment.value?length <= cumber_char_comments>${comment.value[0..]}<#else>${comment.value[0..cumber_char_comments-1]}...</#if>
                      </li>
                      </#if>
                      </#list>
                    </ul>
                  </div>
                </#if>
              </#if>
              <hr>
              <div class="float-left">
                <#if authorized_vote && !suggest_submit_display.suggest_submit.disableVote && suggest_submit_display.suggest_submit.numberScore?exists>
                  <#if suggest_submit_display.suggest_submit_vote_type?exists>
                    ${suggest_submit_display.suggest_submit_vote_type}
                  </#if>
                </#if>
              </div>
              <div class="float-right">
                  <#if authorized_comment && !suggest_submit_display.suggest_submit.disableComment>
                  <a class="btn btn-secondary btn-sm btn-comment" data-form="#comment-form-${suggest_submit_display.suggest_submit.idSuggestSubmit}" href="jsp/site/Portal.jsp?page=suggest&amp;id_suggest=${id_suggest}&amp;id_suggest_submit=${suggest_submit_display.suggest_submit.idSuggestSubmit}&amp;suggest_comment=1&amp;action=view_suggest_submit#suggest${suggest_submit_display.suggest_submit.idSuggestSubmit}">
                    <i class="far fa-comment-dots"></i> #i18n{suggest.suggestListSubmit.labelAddComments}
                  </a>
                  </#if>
                <#if enable_suggest_reports>
                  <a class="btn btn-warning btn-sm " href="jsp/site/Portal.jsp?page=suggest&amp;id_suggest=${id_suggest}&amp;id_suggest_submit=${suggest_submit_display.suggest_submit.idSuggestSubmit}&amp;action=create_report#suggest${suggest_submit_display.suggest_submit.idSuggestSubmit}">
                    <i class="fa fa-flag"></i> #i18n{suggest.suggestListSubmit.labelReport}
                  </a>
                </#if>
                <a class="btn btn-primary btn-sm " href="jsp/site/Portal.jsp?page=suggest&amp;id_suggest=${id_suggest}&amp;id_suggest_submit=${suggest_submit_display.suggest_submit.idSuggestSubmit}&amp;suggest_comment=1&amp;action=view_suggest_submit#suggest${suggest_submit_display.suggest_submit.idSuggestSubmit}">
                  <i class="icofont-refresh"></i> #i18n{suggest.suggestListSubmit.labelReadMore}
                </a>
              </div>
              <#if authorized_comment && !suggest_submit_display.suggest_submit.disableComment>
              <div id="comment-form-${suggest_submit_display.suggest_submit.idSuggestSubmit}" class="comment-form pt-4">
                <form class="form mt-4" action="jsp/site/Portal.jsp?page=suggest" method="post" name="form-comment" id="form-comment">
                  <input name="action" value="do_create_comment" type="hidden">
                  <input name="id_suggest" value="${id_suggest}" type="hidden">
                  <input name="id_suggest_submit" value="${suggest_submit_display.suggest_submit.idSuggestSubmit}" type="hidden">
                  <div class="form-group">
                    <label for="comment_value" class="sr-only">#i18n{suggest.suggestComment.labelAddNewComment}</label>
                    <textarea name="comment_value" id="comment_value" class="markitup form-control" rows="2" placeholder="#i18n{suggest.suggestComment.labelAddNewComment}"></textarea>
                  </div>
                  <#if jcaptcha?exists>
                  <div class="form-group">
                    ${jcaptcha}
                  </div>
                  </#if>
                  <div class="form-group">
                    <button class="btn btn-primary" type="submit" name="submit_comment">
                      <i class="far fa-comment"></i> #i18n{suggest.suggestComment.labelAddNewComment}
                    </button>
                  </div>
                </form>
              </div> 
              </#if>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </#list>
<#else>
  <div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-4">#i18n{suggest.message.empty_suggest}</h1>
      <p class="lead">...</p>
    </div>
  </div>
</#if>

<#if list_suggest_submit?has_content>
  <div class="row">
    <#if paginator?exists>
      <div class="col-xs-12 col-sm-6">
        <!-- #i18n{suggest.suggestListSubmit.paginator.labelResultsCount} :  -->
        #i18n{suggest.suggestListSubmit.paginator.labelResultsRange} :
        <strong>${paginator.rangeMin} - ${paginator.rangeMax} / ${paginator.itemsCount}</strong>
      </div>
      <div class="col-xs-12 col-sm-6 text-right">
        <@pagination paginator=paginator />
      </div>
    </#if>
  </div>
</#if>

<script>
$( function () {
    $('.comment-form').toggle();
    $('.btn-comment').on('click', function(e){
      e.preventDefault();
      var frm = $(this).data('form');
      $(frm).fadeToggle();
    });

    var toGo = location.hash;
    if( toGo !=''){
        $('html, body').animate( {'scrollTop':$(toGo).offset().top - 120 },0 );
    }
    
});
</script>
