<!-- container -->
<section class="ftco-section ftco-no-pt ftc-no-pb">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 py-5">
            <#if action_successful?has_content>
                <div class="alert alert-success">
                    <p class="text-center  lead">
                        <i class="fas fa-check-circle"></i> <#i18n{module.mylutece.database.message.change_password.success}
                    </p>
                    <form role="form" id="changePassword" class="text-center" name="changePassword" action="${action_successful}" method="post">
                        <button class="btn btn-lg btn-success" type="submit" name="btnBack">
                            #i18n{module.mylutece.database.xpage.account.btnBack}
                        </button>
                    </form>
                </div>    
            <#else>
                <#if error_code?has_content >
                    <#assign typeClass = "class=\"error\"" />
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <#if error_code = "error_mandatory_fields">
                            #i18n{module.mylutece.database.message.account.errorMandatoryFields}
                            <#assign classOldPassword = typeClass />
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = "error_old_password">
                            #i18n{module.mylutece.database.message.change_password.badOldPassword}
                            <#assign classOldPassword = typeClass />
                        </#if>
                        <#if error_code = "error_confirmation_password">
                            #i18n{module.mylutece.database.message.account.errorConfirmation}
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = "error_same_password">
                            #i18n{module.mylutece.database.message.change_password.errorSamePassword}
                            <#assign classOldPassword = typeClass />
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = "password_minimum_length">
                            ${password_minimum_length!}
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = "password_format">
                            #i18n{mylutece.message.password.format}
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = "password_already_used">
                            #i18n{mylutece.message.password.passwordAlreadyUsed}
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                        <#if error_code = "max_password_change">
                            #i18n{mylutece.message.password.maxPasswordChange}
                            <#assign classNewPassword = typeClass />
                            <#assign classConfirmation = typeClass />
                        </#if>
                    </div>
                </#if>	
                <form role="form" id="changePassword" name="changePassword" action="jsp/site/plugins/mylutece/modules/database/DoChangePassword.jsp" method="post">
                    <input type="hidden" name="plugin_name" value="${plugin_name}" >
                    <fieldset>
                        <div class="form-group">
                            <label for="old_password">#i18n{module.mylutece.database.xpage.change_password.oldPassword} * : </label>
                            <input class="form-control" type="password" ${classOldPassword?if_exists} name="old_password" id="old_password" maxlength="100" size="35" tabindex="1" value="" />
                        </div>
                        <div class="form-group">
                            <label for="new_password">#i18n{module.mylutece.database.xpage.change_password.newPassword} * : </label>
                            <input class="form-control" type="password" ${classNewPassword?if_exists} name="new_password" id="new_password" maxlength="100" size="35" tabindex="2"  value="" />
                        </div>
                        <div class="form-group">
                            <label for="confirmation_password">#i18n{module.mylutece.database.xpage.change_password.confirmationPassword} * : </label>
                            <input class="form-control" type="password" ${classConfirmation?if_exists} id="confirmation_password" name="confirmation_password" maxlength="100" size="35" tabindex="3" value="" />
                        </div>
                        <button class="btn btn-primary" id="button-subscribe" type="submit" name="changePassword"> 
                            #i18n{module.mylutece.database.xpage.change_password.btnValidate}
                        </button>
                        <button class="btn btn-secondary" id="button-return" type="button" name="back" onclick="javascript:history.go(-1)">
                            #i18n{module.mylutece.database.xpage.account.btnBack} 
                        </button>
                    </fieldset>
                </form>
            </#if>
            </div>
        </div>
    </div>
</section>